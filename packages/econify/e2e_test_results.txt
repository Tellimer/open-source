[0m[32mCheck[0m file:///Users/seanknowles/Projects/tellimer/open-source/packages/econify/src/workflows/e2e_comprehensive_test.ts
[0m[38;5;245mrunning 6 tests from ./src/workflows/e2e_comprehensive_test.ts[0m
E2E: GDP (World Bank, monetary flow, annual, USD) ...
[0m[38;5;245m------- output -------[0m
⚠️ Time conversion to year requested but no source time scale found in unit "Current USD" or explicit fields. Value unchanged.
⚠️ Time conversion to year requested but no source time scale found in unit "Current USD" or explicit fields. Value unchanged.
GDP Results: [
  {
    id: "NY.GDP.MKTP.CDBRA2023",
    value: 2173665655937.27,
    normalized: 2173665655937.27,
    unit: "Current USD",
    normalizedUnit: "USD per year",
    explain: {
      mode: "auto-by-indicator",
      indicatorKey: "gdp (current us$)",
      selected: { currency: undefined, magnitude: "ones", time: "year" },
      reason: "magnitude=majority(ones,1.00); time=majority(year,1.00)"
    }
  },
  {
    id: "NY.GDP.MKTP.CDCHN2023",
    value: 17794783039552,
    normalized: 17794783039552,
    unit: "Current USD",
    normalizedUnit: "USD per year",
    explain: {
      mode: "auto-by-indicator",
      indicatorKey: "gdp (current us$)",
      selected: { currency: undefined, magnitude: "ones", time: "year" },
      reason: "magnitude=majority(ones,1.00); time=majority(year,1.00)"
    }
  }
]
[0m[38;5;245m----- output end -----[0m
E2E: GDP (World Bank, monetary flow, annual, USD) ... [0m[31mFAILED[0m [0m[38;5;245m(12ms)[0m
E2E: Population (World Bank, stock, annual, count) ...
[0m[38;5;245m------- output -------[0m
DEBUG classified as counts: SP.POP.TOTLCHN2023 Population, total Number
DEBUG classified as counts: SP.POP.TOTLIDN2023 Population, total Number
DEBUG classified as counts: SP.POP.TOTLIND2023 Population, total Number
Population Results: []
[0m[38;5;245m----- output end -----[0m
E2E: Population (World Bank, stock, annual, count) ... [0m[31mFAILED[0m [0m[38;5;245m(3ms)[0m
E2E: Unemployment Rate (World Bank, percentage, annual) ...
[0m[38;5;245m------- output -------[0m
DEBUG percentages items: [ "SL.UEM.TOTL.ZSGRC2023", "SL.UEM.TOTL.ZSZAF2023" ]
[0m[38;5;245m----- output end -----[0m
E2E: Unemployment Rate (World Bank, percentage, annual) ... [0m[32mok[0m [0m[38;5;245m(1ms)[0m
E2E: Inflation Rate (World Bank, percentage, annual) ...
[0m[38;5;245m------- output -------[0m
DEBUG percentages items: [ "FP.CPI.TOTL.ZGTUR2023" ]
[0m[38;5;245m----- output end -----[0m
E2E: Inflation Rate (World Bank, percentage, annual) ... [0m[32mok[0m [0m[38;5;245m(0ms)[0m
E2E: CPI Index (World Bank, index, annual) ...
[0m[38;5;245m------- output -------[0m
DEBUG classified as non-monetary -> counts: FP.CPI.TOTLBRA2023 Consumer price index (2010 = 100) Index, 2010=100 { hasCurrency: false, unitLower: "index, 2010=100" }
DEBUG classified as non-monetary -> counts: FP.CPI.TOTLIND2023 Consumer price index (2010 = 100) Index, 2010=100 { hasCurrency: false, unitLower: "index, 2010=100" }
DEBUG classified as non-monetary -> counts: FP.CPI.TOTLZAF2023 Consumer price index (2010 = 100) Index, 2010=100 { hasCurrency: false, unitLower: "index, 2010=100" }
⚠️ Time conversion to year requested but no source time scale found in unit "Index, 2010=100" or explicit fields. Value unchanged.
⚠️ Time conversion to year requested but no source time scale found in unit "Index, 2010=100" or explicit fields. Value unchanged.
⚠️ Time conversion to year requested but no source time scale found in unit "Index, 2010=100" or explicit fields. Value unchanged.
[0m[38;5;245m----- output end -----[0m
E2E: CPI Index (World Bank, index, annual) ... [0m[31mFAILED[0m [0m[38;5;245m(3ms)[0m
E2E: Current Account Balance (World Bank, monetary flow, annual, USD) ...
[0m[38;5;245m------- output -------[0m
⚠️ Time conversion to year requested but no source time scale found in unit "Current USD" or explicit fields. Value unchanged.
⚠️ Time conversion to year requested but no source time scale found in unit "Current USD" or explicit fields. Value unchanged.
[0m[38;5;245m----- output end -----[0m
E2E: Current Account Balance (World Bank, monetary flow, annual, USD) ... [0m[31mFAILED[0m [0m[38;5;245m(1ms)[0m

[0m[1m[37m[41m ERRORS [0m

E2E: GDP (World Bank, monetary flow, annual, USD) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:22:6[0m
[0m[1m[31merror[0m: AssertionError: Values are not equal.


    [90m[1m[Diff][22m[39m [31m[1mActual[22m[39m / [32m[1mExpected[22m[39m


[31m[1m-   2173665655937[22m[39m
[32m[1m+   2174[22m[39m

  throw new AssertionError(message);
[0m[31m        ^[0m
    at [0m[1m[3massertEquals[0m ([0m[36mhttps://jsr.io/@std/assert/1.0.6/equals.ts[0m:[0m[33m51[0m:[0m[33m9[0m)
    at [0m[36mfile:///Users/seanknowles/Projects/tellimer/open-source/packages/econify/src/workflows/e2e_comprehensive_test.ts[0m:[0m[33m68[0m:[0m[33m3[0m

E2E: Population (World Bank, stock, annual, count) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:88:6[0m
[0m[1m[31merror[0m: TypeError: Cannot read properties of undefined (reading 'normalized')
  assertEquals(Math.round(result.data[0].normalized!), 1411);
[0m[31m                                         ^[0m
    at [0m[36mfile:///Users/seanknowles/Projects/tellimer/open-source/packages/econify/src/workflows/e2e_comprehensive_test.ts[0m:[0m[33m143[0m:[0m[33m42[0m

E2E: CPI Index (World Bank, index, annual) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:230:6[0m
[0m[1m[31merror[0m: AssertionError: Values are not equal.


    [90m[1m[Diff][22m[39m [31m[1mActual[22m[39m / [32m[1mExpected[22m[39m


[31m[1m-   false[22m[39m
[32m[1m+   true[22m[39m

  throw new AssertionError(message);
[0m[31m        ^[0m
    at [0m[1m[3massertEquals[0m ([0m[36mhttps://jsr.io/@std/assert/1.0.6/equals.ts[0m:[0m[33m51[0m:[0m[33m9[0m)
    at [0m[36mfile:///Users/seanknowles/Projects/tellimer/open-source/packages/econify/src/workflows/e2e_comprehensive_test.ts[0m:[0m[33m280[0m:[0m[33m3[0m

E2E: Current Account Balance (World Bank, monetary flow, annual, USD) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:283:6[0m
[0m[1m[31merror[0m: AssertionError: Values are not equal.


    [90m[1m[Diff][22m[39m [31m[1mActual[22m[39m / [32m[1mExpected[22m[39m


[31m[1m-   252987271345[22m[39m
[32m[1m+   253[22m[39m

  throw new AssertionError(message);
[0m[31m        ^[0m
    at [0m[1m[3massertEquals[0m ([0m[36mhttps://jsr.io/@std/assert/1.0.6/equals.ts[0m:[0m[33m51[0m:[0m[33m9[0m)
    at [0m[36mfile:///Users/seanknowles/Projects/tellimer/open-source/packages/econify/src/workflows/e2e_comprehensive_test.ts[0m:[0m[33m319[0m:[0m[33m3[0m

[0m[1m[37m[41m FAILURES [0m

E2E: GDP (World Bank, monetary flow, annual, USD) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:22:6[0m
E2E: Population (World Bank, stock, annual, count) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:88:6[0m
E2E: CPI Index (World Bank, index, annual) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:230:6[0m
E2E: Current Account Balance (World Bank, monetary flow, annual, USD) [0m[38;5;245m=> ./src/workflows/e2e_comprehensive_test.ts:283:6[0m

[0m[31mFAILED[0m | 2 passed | 4 failed [0m[38;5;245m(25ms)[0m

[0m[1m[31merror[0m: Test failed
